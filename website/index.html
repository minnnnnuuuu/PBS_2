<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y-Docs | AI Document Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans h-screen overflow-hidden flex flex-col">

    <header class="bg-white border-b border-slate-200 h-16 flex items-center justify-between px-6 flex-shrink-0 z-10">
        <div class="flex items-center gap-2 cursor-pointer" onclick="goHome()">
            <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold">Y</div>
            <span class="text-xl font-bold tracking-tight">Y-Docs</span>
        </div>
        <div class="flex items-center gap-4">
            <button class="px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-md transition"><i class="fas fa-upload mr-2"></i>ë¬¸ì„œ ì—…ë¡œë“œ</button>
            <div class="w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center text-slate-500">
                <i class="fas fa-user"></i>
            </div>
        </div>
    </header>

    <main class="flex-1 relative overflow-hidden">

        <div id="view-dashboard" class="absolute inset-0 flex flex-col items-center justify-center p-4 fade-in transition-all duration-500">
            <div class="w-full max-w-3xl text-center space-y-8">
                
                <div>
                    <h1 class="text-4xl font-extrabold text-slate-900 mb-2">Hello, Team! ğŸ‘‹</h1>
                    <p class="text-slate-500 text-lg">ì‚¬ë‚´ ë¬¸ì„œ, ìœ„í‚¤, ê¸°ìˆ  ê°€ì´ë“œì—ì„œ AIê°€ ë‹µì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤.</p>
                </div>

                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <i class="fas fa-search text-slate-400 group-hover:text-blue-500 transition"></i>
                    </div>
                    <input type="text" id="main-search-input" 
                        class="w-full pl-12 pr-4 py-4 rounded-2xl border border-slate-200 shadow-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                        placeholder="ì˜ˆ: EKS í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œ ì ˆì°¨ ì•Œë ¤ì¤˜"
                        onkeypress="handleMainEnter(event)">
                    <button onclick="startSearch()" class="absolute inset-y-2 right-2 bg-blue-600 hover:bg-blue-700 text-white px-6 rounded-xl transition font-medium">
                        ì§ˆë¬¸í•˜ê¸°
                    </button>
                </div>

                <div class="flex flex-wrap justify-center gap-2">
                    <span class="text-sm text-slate-400 py-1">ì¶”ì²œ ì§ˆë¬¸:</span>
                    <button onclick="fillSearch('VPN ì ‘ì† ì˜¤ë¥˜ í•´ê²° ë°©ë²•')" class="px-3 py-1 bg-white border border-slate-200 rounded-full text-sm text-slate-600 hover:border-blue-400 hover:text-blue-600 transition">VPN ì ‘ì† ì˜¤ë¥˜</button>
                    <button onclick="fillSearch('2025ë…„ 1ë¶„ê¸° OKR ìš”ì•½í•´ì¤˜')" class="px-3 py-1 bg-white border border-slate-200 rounded-full text-sm text-slate-600 hover:border-blue-400 hover:text-blue-600 transition">2025 OKR ìš”ì•½</button>
                    <button onclick="fillSearch('EKS ë…¸ë“œ ê·¸ë£¹ ìƒì„± ê°€ì´ë“œ')" class="px-3 py-1 bg-white border border-slate-200 rounded-full text-sm text-slate-600 hover:border-blue-400 hover:text-blue-600 transition">EKS ê°€ì´ë“œ</button>
                </div>

                <div class="pt-8 w-full text-left">
                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ë¬¸ì„œ</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-xl border border-slate-200 hover:shadow-md transition cursor-pointer">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-8 h-8 bg-red-100 text-red-500 rounded flex items-center justify-center"><i class="fas fa-file-pdf"></i></div>
                                <div class="text-sm font-bold text-slate-700 truncate">DevOps_Roadmap_v2.pdf</div>
                            </div>
                            <div class="text-xs text-slate-400">2ì‹œê°„ ì „ ì—…ë°ì´íŠ¸ë¨</div>
                        </div>
                        <div class="bg-white p-4 rounded-xl border border-slate-200 hover:shadow-md transition cursor-pointer">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-8 h-8 bg-blue-100 text-blue-500 rounded flex items-center justify-center"><i class="fas fa-file-word"></i></div>
                                <div class="text-sm font-bold text-slate-700 truncate">ì‚¬ë‚´_ë³´ì•ˆ_ê·œì •.docx</div>
                            </div>
                            <div class="text-xs text-slate-400">ì–´ì œ ì—…ë°ì´íŠ¸ë¨</div>
                        </div>
                        <div class="bg-white p-4 rounded-xl border border-slate-200 hover:shadow-md transition cursor-pointer">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-8 h-8 bg-green-100 text-green-500 rounded flex items-center justify-center"><i class="fas fa-file-alt"></i></div>
                                <div class="text-sm font-bold text-slate-700 truncate">EKS_Troubleshooting.md</div>
                            </div>
                            <div class="text-xs text-slate-400">3ì¼ ì „ ì—…ë°ì´íŠ¸ë¨</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-chat" class="absolute inset-0 flex hidden opacity-0 transition-opacity duration-300">
            
            <aside class="w-64 bg-white border-r border-slate-200 hidden md:flex flex-col">
                <div class="p-4 border-b border-slate-100">
                    <button onclick="goHome()" class="w-full flex items-center justify-center gap-2 py-2 px-4 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50 transition">
                        <i class="fas fa-plus"></i> ìƒˆ ëŒ€í™” ì‹œì‘
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto p-2 space-y-1">
                    <div class="text-xs font-bold text-slate-400 px-3 py-2">ì˜¤ëŠ˜</div>
                    <button class="w-full text-left px-3 py-2 text-sm text-slate-700 bg-blue-50 rounded-md truncate font-medium">EKS ì—…ê·¸ë ˆì´ë“œ ì§ˆë¬¸</button>
                    <button class="w-full text-left px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-md truncate">ì—°ì°¨ ì‚¬ìš© ê·œì •</button>
                </div>
            </aside>

            <section class="flex-1 flex flex-col bg-white relative">
                <div id="chat-container" class="flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50">
                    
                    <div class="flex items-start gap-4">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white flex-shrink-0 mt-1">
                            <i class="fas fa-robot text-sm"></i>
                        </div>
                        <div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 max-w-2xl text-slate-700 text-sm leading-relaxed">
                            ì•ˆë…•í•˜ì„¸ìš”! ë¬¸ì„œ ê¸°ë°˜ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ê¶ê¸ˆí•œ ë‚´ìš©ì„ ë¬¼ì–´ë³´ì‹œë©´ ê´€ë ¨ ë¬¸ì„œë¥¼ ì°¾ì•„ ë‹µë³€í•´ ë“œë¦½ë‹ˆë‹¤.
                        </div>
                    </div>

                </div>

                <div class="p-4 bg-white border-t border-slate-200">
                    <div class="max-w-3xl mx-auto relative">
                        <textarea id="chat-input" rows="1" 
                            class="w-full pl-4 pr-12 py-3 rounded-xl border border-slate-200 bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:outline-none resize-none overflow-hidden" 
                            placeholder="ì¶”ê°€ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..."
                            onkeypress="handleChatEnter(event)"></textarea>
                        <button onclick="sendMessage()" class="absolute bottom-2.5 right-2 w-8 h-8 bg-blue-600 text-white rounded-lg flex items-center justify-center hover:bg-blue-700 transition">
                            <i class="fas fa-paper-plane text-xs"></i>
                        </button>
                    </div>
                    <div class="text-center mt-2 text-xs text-slate-400">
                        AIëŠ” ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš” ì •ë³´ëŠ” ì›ë³¸ ë¬¸ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.
                    </div>
                </div>
            </section>

            <aside class="w-80 bg-white border-l border-slate-200 hidden lg:flex flex-col">
                <div class="p-4 border-b border-slate-100 font-bold text-slate-700 flex items-center gap-2">
                    <i class="fas fa-book-open text-blue-500"></i> ì°¸ê³  ë¬¸ì„œ (Sources)
                </div>
                <div id="ref-container" class="flex-1 overflow-y-auto p-4 space-y-3">
                    <div class="text-center text-slate-400 text-sm mt-10">
                        ì§ˆë¬¸ê³¼ ê´€ë ¨ëœ ë¬¸ì„œê°€<br>ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                    </div>
                </div>
            </aside>
        </div>

    </main>

    <script>
        const dashboard = document.getElementById('view-dashboard');
        const chatView = document.getElementById('view-chat');
        const mainInput = document.getElementById('main-search-input');
        const chatContainer = document.getElementById('chat-container');
        const chatInput = document.getElementById('chat-input');
        const refContainer = document.getElementById('ref-container');

        // ê²€ìƒ‰ì–´ í´ë¦­ ì‹œ ì…ë ¥ì°½ ì±„ìš°ê¸°
        function fillSearch(text) {
            mainInput.value = text;
            mainInput.focus();
        }

        // ì—”í„°í‚¤ ì²˜ë¦¬
        function handleMainEnter(e) { if(e.key === 'Enter') startSearch(); }
        function handleChatEnter(e) { 
            if(e.key === 'Enter' && !e.shiftKey) { 
                e.preventDefault(); 
                sendMessage(); 
            }
        }

        // ëŒ€ì‹œë³´ë“œ -> ì±„íŒ… í™”ë©´ ì „í™˜
        function startSearch() {
            const query = mainInput.value.trim();
            if(!query) return;

            // í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜
            dashboard.style.opacity = '0';
            setTimeout(() => {
                dashboard.classList.add('hidden');
                chatView.classList.remove('hidden');
                // ì•½ê°„ì˜ ë”œë ˆì´ í›„ opacity ë³€ê²½ (í˜ì´ë“œì¸)
                setTimeout(() => chatView.classList.remove('opacity-0'), 50);
                
                // ì²« ì§ˆë¬¸ ì „ì†¡ ì²˜ë¦¬
                addMessage('user', query);
                simulateAIResponse(query);
            }, 300);
        }

        // ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡
        function sendMessage() {
            const text = chatInput.value.trim();
            if(!text) return;

            addMessage('user', text);
            chatInput.value = '';
            chatInput.style.height = 'auto'; // ë†’ì´ ì´ˆê¸°í™”
            simulateAIResponse(text);
        }

        // ë©”ì‹œì§€ UI ì¶”ê°€
        function addMessage(role, text) {
            const div = document.createElement('div');
            div.className = "flex items-start gap-4 fade-in";
            
            if(role === 'user') {
                div.classList.add('flex-row-reverse');
                div.innerHTML = `
                    <div class="w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center text-slate-600 flex-shrink-0 mt-1">
                        <i class="fas fa-user text-sm"></i>
                    </div>
                    <div class="bg-blue-600 text-white p-4 rounded-2xl rounded-tr-none shadow-md max-w-2xl text-sm leading-relaxed">
                        ${text}
                    </div>
                `;
            } else {
                div.innerHTML = `
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white flex-shrink-0 mt-1">
                        <i class="fas fa-robot text-sm"></i>
                    </div>
                    <div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 max-w-2xl text-slate-700 text-sm leading-relaxed">
                        ${text}
                    </div>
                `;
            }
            chatContainer.appendChild(div);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
        function simulateAIResponse(query) {
            // ë¡œë”© í‘œì‹œ
            const loadingId = 'loading-' + Date.now();
            const loadingDiv = document.createElement('div');
            loadingDiv.id = loadingId;
            loadingDiv.className = "flex items-start gap-4 fade-in";
            loadingDiv.innerHTML = `
                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white flex-shrink-0 mt-1">
                    <i class="fas fa-robot text-sm"></i>
                </div>
                <div class="bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 text-slate-500 text-sm">
                    <i class="fas fa-circle-notch fa-spin mr-2"></i> ë¬¸ì„œë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...
                </div>
            `;
            chatContainer.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // 1.5ì´ˆ í›„ ë‹µë³€ ìƒì„± (ê°€ì§œ)
            setTimeout(() => {
                document.getElementById(loadingId).remove();
                
                // ê°€ì§œ ë‹µë³€ í…ìŠ¤íŠ¸
                const fakeAnswer = `
                    <strong>'${query}'</strong>ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ì…ë‹ˆë‹¤.<br><br>
                    EKS í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œëŠ” <strong>Blue/Green ë°°í¬ ë°©ì‹</strong>ì„ ê¶Œì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. 
                    ì£¼ìš” ì ˆì°¨ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
                    <ul class="list-disc pl-5 mt-2 space-y-1">
                        <li>ìƒˆë¡œìš´ ë²„ì „ì˜ ë…¸ë“œ ê·¸ë£¹ ìƒì„±</li>
                        <li>ê¸°ì¡´ íŒŒë“œ(Pod)ì˜ ë“œë ˆì¸(Drain) ë° ë§ˆì´ê·¸ë ˆì´ì…˜</li>
                        <li>êµ¬ ë²„ì „ ë…¸ë“œ ê·¸ë£¹ ì‚­ì œ</li>
                    </ul>
                    <br>
                    ì‘ì—… ì „ ë°˜ë“œì‹œ <code>kubectl get nodes</code>ë¡œ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.
                `;
                addMessage('ai', fakeAnswer);

                // ìš°ì¸¡ ì°¸ì¡° ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ê°€ì§œ)
                updateReferences();
            }, 1500);
        }

        // ìš°ì¸¡ ì°¸ì¡° íŒ¨ë„ ì—…ë°ì´íŠ¸
        function updateReferences() {
            refContainer.innerHTML = `
                <div class="bg-white p-3 rounded-lg border border-slate-200 hover:border-blue-300 cursor-pointer transition shadow-sm fade-in">
                    <div class="flex items-center justify-between mb-1">
                        <span class="text-xs font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded">PDF</span>
                        <span class="text-xs text-slate-400">98% ì¼ì¹˜</span>
                    </div>
                    <div class="text-sm font-bold text-slate-700 mb-1">EKS_Upgrade_Guide_v2.pdf</div>
                    <div class="text-xs text-slate-500 line-clamp-2">...ë°°í¬ ì „ëµ ì„¹ì…˜ 4.2 ì°¸ì¡°. ë…¸ë“œ ë“œë ˆì¸ ì‹œ ì£¼ì˜ì‚¬í•­...</div>
                </div>

                <div class="bg-white p-3 rounded-lg border border-slate-200 hover:border-blue-300 cursor-pointer transition shadow-sm fade-in">
                    <div class="flex items-center justify-between mb-1">
                        <span class="text-xs font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded">Wiki</span>
                        <span class="text-xs text-slate-400">85% ì¼ì¹˜</span>
                    </div>
                    <div class="text-sm font-bold text-slate-700 mb-1">íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ</div>
                    <div class="text-xs text-slate-500 line-clamp-2">...ì—…ê·¸ë ˆì´ë“œ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ì ˆì°¨ì— ëŒ€í•˜ì—¬...</div>
                </div>
            `;
        }

        // í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function goHome() {
            chatView.classList.add('hidden');
            chatView.classList.add('opacity-0');
            dashboard.classList.remove('hidden');
            setTimeout(() => dashboard.style.opacity = '1', 50);
            mainInput.value = '';
            chatContainer.innerHTML = ''; // ëŒ€í™” ì´ˆê¸°í™” (ì„ íƒì‚¬í•­)
        }

        // í…ìŠ¤íŠ¸ì—ì–´ë¦¬ì–´ ìë™ ë†’ì´ ì¡°ì ˆ
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

    </script>
</body>
</html>